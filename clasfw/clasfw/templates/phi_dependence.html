{% extends "base.html" %}

{% block title -%}
	Differential cross-section
{%- endblock %}

{% block extrahead %}
{#
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
#}
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/1.49.0/plotly.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_SVG"></script>
{% endblock %}

{% block content %}
<h1>Differential cross-section</h1>

<table class="void">
{% if not plot3D %}
<tr>
	<td>
	<table class="properties">
	<thead>
	<tr>	
		<th>Model</th>
		<th class="channel">Channel</th>
		<th>{{ qu.Q2.wu }}</th>
		<th>{{ qu.W.wu }}</th>
		<th>{{ qu.cos_theta.wu }}</th>
		<th class="rsplit">{{ qu.Eb.wu }}</th>
		{% for r in qu.strfuns %}
		<th>{{ r.wu }}</th>
		{% endfor %}
	</tr>
	</thead>
	<tbody>
	<tr>
		<td><a href="{{
			url_for('.model_data', model_id=ampl.model_id)
		}}">{{ ampl.model }}</a></td>
		<td class="channel">{{ ampl.channel }}</td>
		<td>{{ ampl.q2 }}</td>
		<td>{{ ampl.w }}</td>
		<td>{{ ampl.cos_theta |cpx}}</td>
		<td class="rsplit">{{ Eb }}</td>
		{% for r in ampl.strfuns %}
		<td>{{ r }}</td>
		{% endfor %}
	</tr>
	</tbody>
	</table>
	</td>
</tr>
<tr>
	<td>
		<table class="properties">
		<thead>
		<tr>
			{% for aa in qu.amplitudes %}
			<th>{{ aa.wu }}</th>
			{% endfor %}
		</tr>
		</thead>
		<tbody>
		<tr>
			{% for aa in ampl.H[1:] %}
			<td>{{ aa |cpx}}</td>
			{% endfor %}
		</tr>
		</tbody>
		</table>
	</td>
</tr>
{% else %}{# 3D plot #}
<tr>
	<td>
		<table class="properties">
		<tr>
			<th>Channel</th>
			<td>{{ ampl.channel }}</td>
			<th>Model</th>
			<td><a href="{{
				url_for('.model_data', model_id=ampl.model_id)
			}}">{{ ampl.model }}</a></td>
			<th>{{ qu.Q2.wu }}</th>
			<td>{{ ampl.q2 }}</td>
			<th>{{ qu.W.wu }}</th>
			<td>{{ ampl.w }}</td>
			<th>{{ qu.Eb.wu }}</th>
			<td>{{ Eb }}</td>
		</tr>
		</table>
	</td>
</tr>
{% endif %}
</table>

<div id="plot"></div>
<script>
var plot_json = {{ plot|safe }};
Plotly.newPlot('plot', plot_json.data, plot_json.layout, {'displaylogo': false
{%- if not config.DEBUG -%}
, 'modeBarButtonsToRemove': ['sendDataToCloud','resetCameraLastSave3d']
{%- endif -%}
});
</script>
{% endblock%}
